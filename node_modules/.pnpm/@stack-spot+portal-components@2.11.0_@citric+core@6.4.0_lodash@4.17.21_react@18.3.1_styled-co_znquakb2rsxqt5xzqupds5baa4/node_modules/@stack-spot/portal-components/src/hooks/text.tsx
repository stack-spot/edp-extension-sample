import { useEffect, useRef, useState } from 'react'

/**
 * Checks if the text fits completely in the space available.
 * @returns true if it fits, false otherwise.
 */
export function useCheckTextOverflow() {
  const [overflow, setOverflow] = useState<boolean>(false)
  const ref = useRef<HTMLParagraphElement>(null) 

  const checkOverflow = () => {
    if (!ref.current) {
      return
    }

    const hasOverflow = ref.current.offsetWidth < ref.current.scrollWidth
    
    if (hasOverflow === overflow) {
      return
    }

    setOverflow(hasOverflow)  
  }

  useEffect(() => {    
    checkOverflow()
  }, [ref.current])

  return { overflow, ref }
}
