import { useEffect } from 'react'

let originalTitle: string | undefined

/**
 * A React effect for prefixing the page title with the string passed as parameter followed by " - ".
 * 
 * This returns a dispose function that changes the title back to its original value.
 * @param title the prefix to add to the page title.
 * @returns a dispose function.
 */
export function titleEffect(title: string | undefined | null) {
  originalTitle ??= document.title
  document.title = title ? `${title} - ${originalTitle}` : originalTitle
  return () => {
    document.title = originalTitle ?? ''
  }
}

/**
 * Changes the page title to have the string passed as parameter as a prefix followed by " - " and the original title.
 * 
 * Once disposed, this hook changes the title back to its original value.
 * @param title the prefix to add to the page title.
 */
export function useTitleEffect(title: string | undefined | null) {
  useEffect(() => titleEffect(title), [title])
}
