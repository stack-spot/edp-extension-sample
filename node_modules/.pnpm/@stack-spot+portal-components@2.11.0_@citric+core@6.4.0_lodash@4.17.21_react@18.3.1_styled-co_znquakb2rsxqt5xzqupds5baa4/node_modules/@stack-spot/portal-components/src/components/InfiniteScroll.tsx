import { Flex } from '@citric/core'
import { LoadingCircular } from '@citric/ui'
import ReactInfiniteScroll, { Props as ReactInfiniteScrollProps } from 'react-infinite-scroll-component'

/**
 * Renders a component that provides infinite scroll. 
 * 
 * The component wraps around the ReactInfiniteScroll component.
 * It provides a loading indicator using citric loading circular and custom styles.
 *
 * By default, it adds the scrollable target as page and overflow hidden.
 */
export const InfiniteScroll = ({ style, children, scrollableTarget, ...props }: Omit<ReactInfiniteScrollProps, 'loader'>) => (
  <ReactInfiniteScroll
    loader={<Flex alignItems="center" justifyContent="center" p={4} flex={1} data-test-hint="loading">
      <LoadingCircular />
    </Flex>}
    scrollableTarget={scrollableTarget || 'page'}
    style={{ overflow: 'hidden', ...style }}
    {...props}
  >
    {children}
  </ReactInfiniteScroll>
)
