/* eslint-disable react-hooks/rules-of-hooks */
import { useMutation } from '@tanstack/react-query';
import { AutoOperation } from './AutoOperation.js';
import { queryClient } from './react-query-client.js';
export class AutoMutation extends AutoOperation {
    constructor(params) {
        super(params);
    }
    mutate(...args) {
        const variables = args[0] instanceof AbortSignal ? undefined : args[0];
        const signal = args[0] instanceof AbortSignal ? args[0] : args[1];
        return this.callFn(variables, signal);
    }
    useMutation(options) {
        const result = useMutation({
            ...options,
            mutationFn: (variables) => this.callFn(variables, options?.signal),
        }, queryClient);
        return [result.mutateAsync, result.isPending, result.error, result];
    }
}
//# sourceMappingURL=AutoMutation.js.map