import { ReactNode } from 'react'
import { CSSObject, ThemeProvider as SCThemeProvider, createGlobalStyle } from 'styled-components'
import defaultTheme from './default-theme'
import { sx } from './sx'
import { Theme } from './theme-types'

interface Props {
  children: ReactNode,
  theme?: Theme,
}

const GlobalStyle = createGlobalStyle<{ style: CSSObject }>`
  ${({ style }) => style};
`

const ThemeProvider = ({ children, theme = defaultTheme }: Props) => (
  <>
    <GlobalStyle style={sx(theme, theme.globalStyle)} />
    <SCThemeProvider theme={theme}>{children}</SCThemeProvider>
  </>
)

export default ThemeProvider
