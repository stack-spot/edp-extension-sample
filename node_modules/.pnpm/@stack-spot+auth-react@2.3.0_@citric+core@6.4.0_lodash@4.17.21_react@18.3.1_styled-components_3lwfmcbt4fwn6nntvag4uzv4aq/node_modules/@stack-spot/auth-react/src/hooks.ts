import { Session } from '@stack-spot/auth'
import { useEffect, useState } from 'react'
import { SessionManager } from './SessionManager'

export function useSession() {
  const manager = SessionManager.instance
  const [session, setSession] = useState<Session | undefined>(manager?.hasSession() ? manager.getSession() : undefined)
  useEffect(() => {
    return manager?.onChange(setSession)
  }, [])
  return session
}
